http:
  routers:
    auth-router:
      rule: PathPrefix(`/api/auth`)
      service: auth-service
      entryPoints:
        - gateway
      middlewares:
        - strip-api
    user-route:
      rule: PathPrefix(`/api/user`)
      service: auth-service
      entryPoints:
        - gateway
      middlewares:
        - strip-api
    swagger-router:
      rule: PathPrefix(`/api/docs`)
      service: swagger-service
      entryPoints:
        - gateway
      middlewares:
        - strip-api

  services:
    auth-service:
      loadBalancer:
        servers:
          - url: 'http://auth-service:4001'
    swagger-service:
      loadBalancer:
        servers:
          - url: 'http://swagger-docs-service:4050'

  middlewares:
    strip-api:
      stripPrefix:
        prefixes:
          - '/api'
        forceSlash: false

    auth-middleware:
      forwardAuth:
        address: 'http://auth-service:4001/verify-token'
        trustForwardHeader: true
        authResponseHeaders:
          - 'X-User-ID'
          - 'X-User-Email'
